# -*- coding: utf-8 -*-
"""heroku_salary.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1U4Qp4LSE10n0-nlRzllrDWHo7R4sKIMn
"""

import pandas as pd
import numpy as np
from sklearn import linear_model
import matplotlib.pyplot as plt
import pickle

df = pd.read_csv('canada.csv')
df

# Commented out IPython magic to ensure Python compatibility.
# %matplotlib inline
plt.xlabel('year')
plt.ylabel('income')
plt.scatter(df.year,df.income,color='red',marker='+')

new_df = df.drop('income',axis='columns')
new_df

income = df.income
income

reg = linear_model.LinearRegression()
model =reg.fit(new_df,income)

reg.predict(df[['year']])

reg.coef_

reg.intercept_

# Commented out IPython magic to ensure Python compatibility.
# %matplotlib inline
plt.xlabel('year')
plt.ylabel('income')
plt.scatter(df.year,df.income,color='red',marker='+')
plt.plot(df['year'],reg.predict(df[['year']]),color ='b')

model.score(new_df,income)

"""train_test_split method"""

from sklearn.model_selection import train_test_split
X_train, X_test, y_train, y_test = train_test_split(df.drop('income',axis='columns'),df.income, test_size= 0.2)#train_size=0.8

len(X_train)

X_train

from sklearn.linear_model import LinearRegression
lr= LinearRegression()
lr.fit(X_train,y_train)

lr.predict(X_test)

y_test

lr.score(X_test,y_test)

"""#pickle"""

pickle.dump(lr,open('model.pkl','wb'))

model = pickle.load(open('model.pkl','rb'))

print(model.predict([[2010]]))